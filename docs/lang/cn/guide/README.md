# Alief账户系统

基于Substrate框架，Alief网络的账户系统分为五种：

* **stash**：主要用于存储资产的账户。
* **controller**：验证人节点或提名人用于控制stash账户行为的控制账户。
* **grandpa**：验证人节点参与不可撤销块共识的账户，通过libp2p向其他节点标识自己。
* **babe**：验证人节点参与出块节点随机选择算法共识的账户。
* **imOnline**：验证人节点表明自己仍然活跃的账户。

上述账户地址生成算法分为以下两种：

* **Sr25519**：基于Curve25519加密算法，但它使用Schnorr签名而不是EdDSA方案，在保留相同功能集和安全性假设的前提下，使加密更加高效。此外，该算法天然支持多重签名。在实现复杂协议方面，性能优于Ed25519。
* **Ed25519**：通常用于更简单的实例，如只需要提供签名功能的帐户密钥，因此也拥有更广泛的支持生态系统。

# 什么是验证人？

Alief网络依靠多个验证人保证网络的安全。验证人通过运行全节点提交新块，并参与网络共识、广播带有其私钥签名的验证结果；除此之外，验证人还可以通过给提案投票参与网络治理。

验证人根据其行为享有一定的权益及责任。

# 如何成为候选验证人？

任意想参与网络共识的节点都可在启动节点时，加入--validator参数申请成为验证人，便可成为候选验证人。

启动节点时，验证人还需要知晓一下参数：

* **--key**：验证人启动节点时，需要填写SessionKey的私钥，可通过Alief浏览器生成。
* **--name**：验证人节点的名称，如alice。
* **--port**：验证人节点TCP端口号，如30333。
* **--bootnodes**：运行的区块链启动节点ID，如QmRpheLN4JWdAnY7HGJfWFNbfkQCb6tFf4vvA6hgjMZKrR。
* **--base-path**：区块链数据库存储路径。
* **--telemetry-url**（可选）：节点汇总及状态上传服务器。

启动节点后，验证人需执行以下两个步骤：

* **bond**：验证人除了要有启动节点时的Session账户，还需同时拥有stash账户、controller账户([Alief网络的账户体系]())。其中stash账户用于存储验证节点所获奖励，controller账户用于控制节点行为（只需存入少量ALF）。并将stash账户和controller账户进行绑定。
* **validate**：验证人通过controller账户执行validate操作，需要配置以下ALF奖罚参数：
	
	**免罚阈值**：如设置该值为3，则在一个计奖周期内，节点异常行为出现3次以内，可免于惩罚。
	
	**奖励预留**：计奖周期结束时，奖池内会有ALF奖励，奖励预留从奖池中抽取用于奖励验证节点，奖池中剩余ALF用于奖励其委托人。

至此，验证人节点申请已完成注册，该节点成为候选验证人。

# 如何选举验证人？
Alief验证人选举机制采用**MPoS**算法，即在Substrate原生PoS算法基础上，加入多资产质押统计。

Alief MPoS算法遵循以下几个原则：

1.验证人除了可以通过质押ALF，还可以质押BTC、LTC等跨链资产申请成为验证人。

2.提名人也可质押ALF、BTC、LTC等资产，委托至其信任验证节点。

3.不同跨链资产相对于ALF有各自不同的价值因子，该参数可通过社区治理调节。

4.依据[归一化价值算法]()及[自适应权重调节算法]()，结合节点自身抵押资产价值及其所有提名人所投资产价值，综合质押价值越高者，当选验证人概率越大。

5.若候选验证人当前没有当选，则下一轮选举胜出概率较大，从而避免出现超级节点。

6.若某提名人历史投票准确率较高（即被投节点成功当选验证人概率大），且该提名人所投资产金额占某候选验证人总资产价值比重越大，则该候选验证人成功当选验证人概率大。

# 什么是提名人？

提名人可通过直接将资产委托至验证人以共享Alief网络的奖励，而不用亲自运行节点。

但须注意的是，根据所委托的验证节点的行为，提名人除共享验证人的奖励外，也承担相应惩罚责任。

# 如何成为提名人？

任何有一定ALF或BTC、LTC等资产的人，均可成为提名人。只需执行以下两个步骤：

* **bond**：提名人需同时拥有stash账户、controller账户([Alief网络的账户体系]())。其中stash账户用于存储提名人的资产及奖励，controller账户用于控制提名人的行为（只需存入少量ALF），并将stash账户和controller账户进行绑定。
* **nominate**：提名人通过controller账户执行nominate操作，需要配置参数如下：

	**节点列表**：提名人选择的信任节点列表。

若节点成功当选为验证人，则提名人共享奖励与惩罚。因此，提名人需谨慎选择所委托节点。

# 如何解质押？
不论是验证节点还是提名人，均可通过**"unbond"**操作赎回质押资产。需要注意的是，为了防止节点作恶及长程攻击，Alief网络的赎回锁定期为28天。

# 交易费用类型有哪些？
详见[手续费]()
# 验证人、提名人如何获得奖励？
详见[奖惩机制]()
# 出块奖励如何分配？
详见[出块奖励如何分配]()

